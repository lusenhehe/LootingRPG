# 配置治理执行任务看板（可直接分配）

## 0. 使用说明

- 目标：把 `docs/config-architecture.md` 与 `docs/config-registry.md` 转成可执行任务。
- 规则：每个任务单独提交，禁止跨批次混改。
- 完成标准：每个任务需附“影响范围 + 验收结果 + 回滚说明”。

---

## A 批次（冻结与对齐）

### A1. 建立配置变更登记流程
- 类型：治理
- 预计工作量：0.5d
- 依赖：无
- 交付物：更新文档，定义新增配置登记入口与字段
- 验收：新增配置时可按模板登记；示例填写 1 条

### A2. 键名与字段命名规范定稿
- 类型：规范
- 预计工作量：0.5d
- 依赖：A1
- 交付物：命名规范表（camelCase 或 snake_case 二选一）
- 验收：文档中明确禁止中英混合 key；约定 `nameKey` 等国际化字段

### A3. 依赖方向规则落地（文档 + Checklist）
- 类型：架构
- 预计工作量：0.5d
- 依赖：A1
- 交付物：单向依赖规则写入 PR 检查项
- 验收：PR 模板中出现“无跨层逆向依赖”检查项

---

## B 批次（content 归位）

### B1. 迁移 monsters 配置到 content 层
- 类型：重构（结构迁移）
- 预计工作量：1d
- 依赖：A2, A3
- 涉及：`src/config/monsters.json`、适配层引用
- 交付物：content 层位置明确，旧路径兼容策略说明
- 验收：运行行为不变；引用无断裂；字段兼容策略可追溯

### B2. 迁移 mapChapters 到 content 层
- 类型：重构（结构迁移）
- 预计工作量：1d
- 依赖：A2, A3
- 涉及：`src/config/mapChapters.ts` 及调用方
- 交付物：地图章节归位；展示文案字段和数据字段分离说明
- 验收：地图功能行为一致；章节读取路径统一

### B3. 文案键化策略（name/nameKey 过渡）
- 类型：兼容治理
- 预计工作量：1d
- 依赖：B1, B2
- 交付物：内容配置字段兼容矩阵
- 验收：支持旧字段读取；新字段可渐进替换

---

## C 批次（game/ui 拆分）

### C1. settings 拆分：progression 与 ui tokens
- 类型：重构（职责拆分）
- 预计工作量：1d
- 依赖：A3
- 涉及：`src/constants/settings.ts`
- 交付物：拆分方案与迁移顺序
- 验收：数值参数与 UI token 边界清晰；无业务行为变化

### C2. 装备配置子域化（quality/slot/stat）
- 类型：配置治理
- 预计工作量：1d
- 依赖：A2
- 涉及：`src/config/gameConstants.json`
- 交付物：拆分后的子域定义（可先文档化）
- 验收：每个子域职责单一，字段无重复定义

### C3. runtime 配置收口（storage/env）
- 类型：架构收口
- 预计工作量：0.5d
- 依赖：C1
- 涉及：`src/constants/game.ts` 中存储 key 与运行时开关
- 交付物：统一 runtime 入口设计
- 验收：存储 key 不再散落多处定义

---

## D 批次（适配层收口）

### D1. 建立 adapters 层边界
- 类型：架构
- 预计工作量：0.5d
- 依赖：B1, B2, C1
- 交付物：`logic/adapters` 责任定义（翻译注入、正规化）
- 验收：配置层不直接执行翻译与复杂派生

### D2. 将 monsterData 的正规化迁到 adapters
- 类型：重构（低风险分步）
- 预计工作量：1d
- 依赖：D1
- 涉及：`src/constants/monsterData.ts`
- 交付物：迁移后的调用链路图
- 验收：怪物生成行为一致；配置文件数据纯度提高

### D3. constants 收敛为“真正常量”
- 类型：治理
- 预计工作量：1d
- 依赖：D2
- 交付物：`constants/*` 文件职责清单
- 验收：`constants` 不再承担配置装配职责

---

## E 批次（工程治理固化）

### E1. 建立 ESLint + Prettier + EditorConfig 基线
- 类型：工程规范
- 预计工作量：1d
- 依赖：A3
- 交付物：基础配置文件与 npm scripts 约定
- 验收：本地可一键检查格式与静态问题

### E2. 跨平台脚本整改（clean/build/check）
- 类型：工程稳定性
- 预计工作量：0.5d
- 依赖：E1
- 涉及：`package.json` scripts
- 验收：Windows/macOS/Linux 行为一致

### E3. README 增加“配置修改流程”
- 类型：文档治理
- 预计工作量：0.5d
- 依赖：A1, E1
- 交付物：标准改配置流程、回滚策略、检查命令
- 验收：新成员可按 README 独立完成一次配置变更

---

## 里程碑建议

- M1（A 完成）：规则冻结，防止继续变乱
- M2（B+C 完成）：配置归位，职责清晰
- M3（D+E 完成）：结构稳定，规范长期生效

---

## 每个任务的统一验收模板

1. 目标文件/模块：
2. 变更类型（迁移/拆分/规范/文档）：
3. 兼容性影响（存档/i18n/构建）：
4. 验证结果（typecheck/运行截图或日志）：
5. 回滚方式：
