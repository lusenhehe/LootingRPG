# 迁移台账（Phase 0 起）

> 记录规则：每次迁移必须记录 **来源文件 -> 新文件 -> 删除时间**，并标注状态。

## 字段说明
- **状态**：`规划中` / `迁移中` / `已切换` / `已删除`
- **删除时间**：计划删除日期或实际删除日期
- **验证**：至少包含一种（typecheck/build/smoke/人工回归）

## 台账记录

| 编号 | 领域 | 来源文件 | 新文件（目标） | 状态 | 负责人 | 删除时间 | 验证 | 备注 |
|---|---|---|---|---|---|---|---|---|
| MIG-001 | battle | `src/logic/battle/index.ts` | `src/domains/battle/services/*` + `src/domains/battle/reducers/*` | 规划中 | TBC | 2026-03-31（计划） | - | 战斗核心先拆纯函数再接 reducer |
| MIG-002 | inventory | `src/logic/equipment.ts` | `src/domains/inventory/services/equipment.ts` | 规划中 | TBC | 2026-03-20（计划） | - | 与 `equipmentUtils/enhancement` 一并收敛 |
| MIG-003 | inventory | `src/logic/equipmentUtils.ts` | `src/domains/inventory/services/equipment.ts` | 规划中 | TBC | 2026-03-20（计划） | - | 合并重复装备计算 |
| MIG-004 | inventory | `src/logic/enhancement.ts` | `src/domains/inventory/services/equipment.ts` | 规划中 | TBC | 2026-03-20（计划） | - | 与装备服务统一出口 |
| MIG-005 | player | `src/logic/playerStats.ts` | `src/domains/player/services/playerStats.ts` | 规划中 | TBC | 2026-03-18（计划） | - | 与 `logic/stats/playerStats.ts` 合并 |
| MIG-006 | player | `src/logic/stats/playerStats.ts` | `src/domains/player/services/playerStats.ts` | 规划中 | TBC | 2026-03-18（计划） | - | 同名模块冲突优先处理 |
| MIG-007 | map | `src/config/map/ChapterData.ts` | `src/domains/map/model/chapters.ts` | 规划中 | TBC | 2026-03-25（计划） | - | map 配置单一来源化 |
| MIG-008 | map | `src/logic/mapProgress.ts` | `src/domains/map/services/progress.ts` | 规划中 | TBC | 2026-03-28（计划） | - | 保留函数语义，迁移目录 |
| MIG-009 | app | `src/App.tsx`（编排职责） | `src/app/AppShell.tsx` + `src/app/useGameOrchestrator.ts` | 规划中 | TBC | 2026-04-05（计划） | - | 降低 App 组件职责密度 |
| MIG-010 | docs | `docs/优化/模块清单.md` | `docs/architecture/module-inventory.md`（可选） | 规划中 | TBC | 2026-04-10（计划） | - | 稳定后迁到统一架构文档目录 |

---

## 使用规范（强制）
1. 迁移开始前先加一条记录，禁止“先改后补”。
2. 状态更新必须随 PR 一起提交。
3. 当状态改为 `已删除` 时，删除时间填“实际删除日期”。
4. 未登记台账的迁移 PR 一律不合并。
