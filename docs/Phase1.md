🔹 Phase 1：打地基（纯架构阶段，不加玩法）

这个阶段 不增加复杂机制
只做结构升级。

Phase 1-1：统一战斗单位结构

目标：
建立 BattleUnit 核心模型

你要完成：
新建 BattleUnit 接口
怪物改为使用 baseStats + skills + passives
增加 elements 字段
增加 aiProfile
增加 tags
此阶段成果：
怪物 JSON 升级
旧代码还能跑
战斗逻辑不重写
⛔ 不做
不做技能重写
不做元素系统
不做 Buff 重构
Phase 1-2：Battle Context 抽离
目标：
把“战斗过程状态”集中管理
创建：
BattleContext
TurnManager
UnitRegistry
解决问题：
不再到处传 unit 数组
不再 if 判断怪物还是玩家
所有单位统一放入 registry
此阶段成果：
战斗有统一器
单位引用标准
为 PvP 做准备
⛔ 不做：

不改技能逻辑

不做复杂AI

Phase 1-3：技能执行改为管线模式

目标：
把技能从 “函数调用” 改为 “执行流程”

建立：

SkillDefinition

SkillExecutor

Effect Pipeline

执行顺序标准化：

选择目标
→ 命中判定
→ 伤害计算
→ Buff应用
→ 触发被动
→ 结算

此阶段成果：

技能不再写死逻辑

可插入组件

未来积木系统入口完成

⛔ 不做：

不做技能拼装

不做元素反应

Phase 1-4：事件系统建立

目标：
建立战斗事件总线

新增：

BattleEventBus

onDamage

onTurnStart

onDeath

onSkillCast

这一步非常关键。

因为未来：

装备词条

被动技能

套装效果

元素反应

全部依赖事件监听。

此阶段成果：

战斗进入可扩展状态

不再需要 if monster.id === xxx

⛔ 不做：

不做复杂触发链

不做反应系统

Phase 1-5：单位行动系统重构

目标：
从“轮流打”升级为“行动队列”

新增：

speed 参与排序

行动条计算

未来支持控制类效果

此阶段成果：

回合机制稳定

可扩展为加速、减速、冻结

⛔ 不做：

不做复杂打断

不做插队技能

🔹 Phase 1 完成后你将获得什么？

一个：

✔ 可扩展的回合制核心
✔ 单位统一模型
✔ 技能管线化
✔ 事件驱动结构
✔ 可插入装备与被动
✔ PvP 技术基础已具备

而且——

此时游戏玩法仍然简单。

但结构已经是中型独立游戏级别。

🔹 为什么不能现在就做技能拼装？

因为：

拼装技能 = 动态效果组合
动态效果组合 = 事件驱动
事件驱动 = 稳定的执行管线
执行管线 = Phase 1-3 才能提供

顺序不能乱。

🔹 推荐开发顺序（非常具体）

按这个顺序做：

1️⃣ Phase 1-1 单位结构
2️⃣ Phase 1-2 战斗容器
3️⃣ Phase 1-3 技能执行管线
4️⃣ Phase 1-4 事件系统
5️⃣ Phase 1-5 行动队列

不要跳。