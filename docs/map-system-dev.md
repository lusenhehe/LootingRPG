# 地图界面分级设计文档（仅设计，不实现代码）

## 1. 文档状态

- 状态：可评审（Review Ready）
- 目标版本：MVP v1
- 表现形式：2D 俯视角地图（Top-Down）
- 本阶段范围：只产出方案与数据草案，不新增任何代码文件、不改现有业务流程

---

## 2. 目标与边界

### 2.1 目标

为战斗系统增加“地图推进视图”（2D 俯视角），让玩家在战斗前能明确理解：

1. 自己处于哪个章节/区域
2. 当前可挑战节点与推荐等级
3. 不同区域之间的难度梯度与奖励差异

### 2.2 明确边界（本期不做）

1. 不接入实际战斗触发
2. 不改存档结构
3. 不新增地图数值结算逻辑
4. 不做分支剧情/事件系统
5. 不制作地图美术资源与动效

---

## 3. 地图分级结构（Chapter 1 ~ Chapter 10）

采用 10 章线性推进；每章 3 个节点（普通 → 精英 → Boss），共 30 个节点。

### Chapter 1：新手林地（Lv.1-10）

- 节点 1-1：侦查营地（普通战）
- 节点 1-2：苔石峡谷（精英战）
- 节点 1-3：林地首领巢穴（Boss）

### Chapter 2：废弃地牢（Lv.10-20）

- 节点 2-1：破碎回廊（普通战）
- 节点 2-2：幽影牢室（精英战）
- 节点 2-3：地牢领主王座（Boss）

### Chapter 3：熔岩深渊（Lv.20-35）

- 节点 3-1：熔火桥（普通战）
- 节点 3-2：灰烬祭坛（精英战）
- 节点 3-3：深渊核心（Boss）

### Chapter 4：永夜墓园（Lv.35-50）

- 节点 4-1：枯骨庭院（普通战）
- 节点 4-2：死灵拱廊（精英战）
- 节点 4-3：冥灯守望者（Boss）

### Chapter 5：风暴海岸（Lv.50-65）

- 节点 5-1：断潮码头（普通战）
- 节点 5-2：雷涌灯塔（精英战）
- 节点 5-3：海啸先知（Boss）

### Chapter 6：机械荒城（Lv.65-80）

- 节点 6-1：锈蚀车站（普通战）
- 节点 6-2：齿轮工坊（精英战）
- 节点 6-3：主控核心（Boss）

### Chapter 7：晶簇高原（Lv.80-100）

- 节点 7-1：蓝晶台地（普通战）
- 节点 7-2：折光裂谷（精英战）
- 节点 7-3：棱镜裁决者（Boss）

### Chapter 8：虚空边境（Lv.100-120）

- 节点 8-1：失序前哨（普通战）
- 节点 8-2：裂隙回环（精英战）
- 节点 8-3：虚无织者（Boss）

### Chapter 9：星渊回廊（Lv.120-145）

- 节点 9-1：陨星阶梯（普通战）
- 节点 9-2：深空祭坛（精英战）
- 节点 9-3：天穹吞噬者（Boss）

### Chapter 10：终焉王座（Lv.145-170）

- 节点 10-1：终焉前庭（普通战）
- 节点 10-2：王座禁区（精英战）
- 节点 10-3：终焉之主（终章 Boss，可循环）

---

## 4. 地图界面信息设计（2D 俯视角）

地图作为单独 Tab 显示在游戏界面导航中。

### 4.1 布局

1. 左侧：章节/区域列表（Chapter 1 ~ Chapter 10）
2. 右侧：2D 俯视角节点网格（显示当前章节所有节点）
3. 顶部：章节信息条（当前章节、当前节点、总进度）

### 4.2 节点卡片最低展示字段

1. 节点名称
2. 推荐等级（如 `Lv.42`）
3. 节点类型（普通/精英/Boss）
4. 首通奖励（金币、额外掉落权重）
5. 状态标签（未解锁/可挑战/已通关）

### 4.3 移动端策略

1. 章节列表折叠为抽屉
2. 节点网格改为单列卡片流
3. 顶部信息条保持固定展示

---

## 5. 节点难度梯度规则（设计稿）

仅作为后续实现参考，本期不落代码：

1. 推荐等级按章节区间递增
2. 同一章节内 `普通 < 精英 < Boss`
3. 章节越高，怪物基础三维与机制复杂度同步上升
4. 第 10 章 Boss 支持循环挑战与高阶掉落

建议公式（草案）：

$$
recommendedLevel = chapterStartLevel + nodeIndex \times 3
$$

$$
nodeDifficulty = chapterDifficultyBase + nodeTypeWeight
$$

其中：`nodeTypeWeight` 可约定为普通=1、精英=2、Boss=3。

---

## 6. 奖励设计（草案）

每章节点奖励分层：

1. 常规奖励：金币、经验
2. 首通奖励：额外金币 + 章节徽记
3. Boss 节点奖励：装备品质权重提升（一次性）

附加规则：

1. 首通奖励全账号仅触发一次
2. 终章 Boss 可循环挑战，但只保留常规奖励

---

## 7. 页面交互流程（设计）

1. 玩家点击主导航“地图”Tab
2. 左侧选择章节/区域
3. 右侧查看该区域节点与推荐等级
4. 点击节点卡片，进入挑战流程（本期仅定义，不落代码）
5. 返回地图后刷新节点状态与章节进度

---

## 8. 数据草案（仅文档）

建议每个节点包含以下字段：

1. `id`
2. `chapter`
3. `name`
4. `type`（normal/elite/boss）
5. `recommendedLevel`
6. `firstClearReward`
7. `nextNodeIds`

建议每个章节包含以下字段：

1. `chapterId`
2. `name`
3. `levelRange`
4. `theme`
5. `nodes`

---

## 9. 与现有系统的未来接入点（仅占位）

未来接入建议（后续版本执行）：

1. 入口：新增地图 Tab
2. 状态：新增 `mapProgress`
3. 存档：`SavePayload` 增加可选地图字段
4. 战斗：节点参数注入现有战斗模拟

---

## 10. 验收标准（文档阶段）

本期以“文档可评审、可实现”为标准：

1. Chapter 1 ~ Chapter 10 分级完整
2. 2D 俯视角地图交互清晰
3. 节点字段与章节字段可直接转配置
4. 难度与奖励规则可计算
5. 明确本期不写代码，防止范围漂移