# é…ç½®è¿ç§»å¼€å‘é˜¶æ®µï¼ˆå•æ–‡ä»¶è¿½è¸ªï¼‰

## 0. è¯´æ˜

- æœ¬æ–‡ä»¶ç”¨äºç»Ÿä¸€è¿½è¸ªé…ç½®è¿ç§»ä¸æ—§ä»£ç æ¸…ç†è¿›åº¦ã€‚
- çŠ¶æ€å®šä¹‰ï¼š`âœ… å·²å®Œæˆ` / `ğŸŸ¡ è¿›è¡Œä¸­` / `â¬œ æœªå¼€å§‹`ã€‚
- æ›´æ–°åŸåˆ™ï¼šæ¯æ¬¡è¿ç§»æäº¤ååªæ›´æ–°æœ¬æ–‡ä»¶ï¼Œä¸å†åˆ†æ•£è®°å½•ã€‚

---

## 1. é˜¶æ®µæ€»è§ˆ

| é˜¶æ®µ | ç›®æ ‡ | å½“å‰çŠ¶æ€ |
|---|---|---|
| Phase Aï¼šè§„åˆ™å†»ç»“ | å›ºåŒ–å‘½åä¸ä¾èµ–è§„åˆ™ | ğŸŸ¡ è¿›è¡Œä¸­ |
| Phase Bï¼šcontent å½’ä½ | monster/map å†…å®¹èµ„äº§å½’ä½ | âœ… å·²å®Œæˆ |
| Phase Cï¼šgame/ui/runtime æ‹†åˆ† | æ•°å€¼ã€UI tokenã€runtime æ”¶å£ | ğŸŸ¡ è¿›è¡Œä¸­ |
| Phase Dï¼šadapter æ”¶å£ | é€‚é…é€»è¾‘ä» constants è¿è‡³ logic/adapters | âœ… å·²å®Œæˆ |
| Phase Eï¼šå·¥ç¨‹æ²»ç†å›ºåŒ– | lint/format/è·¨å¹³å°è„šæœ¬ä¸æµç¨‹ | â¬œ æœªå¼€å§‹ |

---

## 2. å·²å®Œæˆé¡¹ï¼ˆä»£ç å±‚ï¼‰

### C é˜¶æ®µï¼ˆç»“æ„æ‹†åˆ†ï¼‰
- âœ… æ–°å¢ `src/config/game/progression.ts`ï¼ˆç©å®¶æˆé•¿ä¸æˆ˜æ–—å¥–åŠ±ï¼‰ã€‚
- âœ… æ–°å¢ `src/config/ui/tokens.ts`ï¼ˆUI å°ºå¯¸ä¸æ ·å¼ tokenï¼‰ã€‚
- âœ… æ–°å¢ `src/config/runtime/storage.ts`ï¼ˆå­˜æ¡£ key æ”¶å£ï¼‰ã€‚
- âœ… æ–°å¢ `src/config/game/equipment.ts`ï¼ˆè£…å¤‡å“è´¨/éƒ¨ä½/è¯æ¡æ± /å“è´¨è¡¨ï¼‰ã€‚
- âœ… æ–°å¢ `src/config/game/qualities.json`ã€`src/config/game/slots.json`ã€`src/config/game/statPool.json`ã€`src/config/game/qualityConfig.json`ï¼ˆgame å­åŸŸæ‹†åˆ†ï¼‰ã€‚
- âœ… æ–°å¢ `src/logic/i18n/labels.ts`ï¼ˆæ ‡ç­¾ç¿»è¯‘å‡½æ•°æ”¶å£ï¼‰ã€‚
- âœ… æ–°å¢ `src/logic/inventory/autoSell.ts`ï¼ˆè‡ªåŠ¨å‡ºå”®é…ç½®å·¥å…·ï¼‰ã€‚
- âœ… åˆ é™¤æ—§æ–‡ä»¶ `src/constants/settings.ts`ã€‚
- âœ… åˆ é™¤æ—§æ–‡ä»¶ `src/constants/game.ts`ã€‚
- âœ… åˆ é™¤æ—§æ–‡ä»¶ `src/config/gameConstants.json`ã€‚
- âœ… åˆ é™¤æ—§æ–‡ä»¶ `src/config/game/keyMaps.ts`ï¼ˆå…¼å®¹æ˜ å°„å·²ä¸‹çº¿ï¼‰ã€‚

### B / D é˜¶æ®µï¼ˆå†…å®¹ä¸é€‚é…ï¼‰
- âœ… æ–°å¢ `src/logic/adapters/monsterConfigAdapter.ts`ï¼Œæ‰¿æ¥ monster æ•°æ®é€‚é…ã€‚
- âœ… æ–°å¢ `src/logic/adapters/mapChapterAdapter.ts`ï¼Œæ‰¿æ¥ map chapter æ•°æ®å…¥å£ã€‚
- âœ… æ–°å¢ `src/logic/adapters/monsterLoreAdapter.ts`ï¼Œæ‰¿æ¥æ€ªç‰© lore é™„åŠ é€»è¾‘ã€‚
- âœ… æ–°å¢ `src/logic/stats/monsterScaling.ts`ï¼Œæ‰¿æ¥æ€ªç‰©ç¼©æ”¾è§„åˆ™ã€‚
- âœ… æ–°å¢ `src/logic/adapters/monsterCatalogAdapter.ts`ï¼Œæ‰¿æ¥å›¾é‰´ç”¨æ€ªç‰©åˆ—è¡¨ã€‚
- âœ… æ–°å¢ `src/config/content/monsterSchema.ts`ï¼Œä¸º monsters é…ç½®æä¾› schema/type çº¦æŸã€‚
- âœ… å†…å®¹æ–‡ä»¶è¿ç§»ï¼š`src/config/monsters.json` -> `src/config/content/monsters.json`ã€‚
- âœ… åˆ é™¤æ—§æ–‡ä»¶ `src/config/mapChapters.ts`ã€`src/config/monsters.json`ã€`src/constants/monsterData.ts`ã€`src/constants/monsterLore.ts`ã€`src/constants/monsterScaling.ts`ã€‚
- âœ… å…¨é‡è°ƒç”¨æ–¹å·²åˆ‡æ¢åˆ°æ–°è·¯å¾„ï¼ˆhooks/logic/componentsï¼‰ã€‚

### éªŒè¯
- âœ… æ¯è½®è¿ç§»åå·²æ‰§è¡Œ `npm run lint`ï¼ˆ`tsc --noEmit`ï¼‰å¹¶é€šè¿‡ã€‚

---

## 3. è¿›è¡Œä¸­é¡¹

### C é˜¶æ®µè¡¥å…¨ï¼ˆgame å­åŸŸè¿›ä¸€æ­¥æ‹†åˆ†ï¼‰
- âœ… å·²å®Œæˆèšåˆé…ç½®æ‹†åˆ†ï¼Œå½“å‰å·²æŒ‰å­åŸŸæ–‡ä»¶è¯»å–ã€‚
- âœ… å·²åˆ é™¤å…¨éƒ¨æ—§å…¼å®¹æ˜ å°„ä¸æ—§å­—æ®µ fallbackï¼Œè¿è¡Œæ—¶ä»…ä¿ç•™æ–°ç»“æ„ã€‚
- ğŸŸ¡ ä¸‹ä¸€æ­¥èšç„¦ï¼šç»§ç»­æŒ‰â€œé™æ€é…ç½® / è¿è¡Œæ—¶é€»è¾‘â€æ”¶ç´§è¾¹ç•Œã€‚

### ä¾èµ–è¾¹ç•Œæ”¶å£ï¼ˆè·¨å±‚ï¼‰
- ğŸŸ¡ ç›®æ ‡ï¼šç»§ç»­æ£€æŸ¥å¹¶å‰Šå‡ `logic <-> config` çš„éšå¼è€¦åˆï¼Œç¡®ä¿åˆ†å±‚ç¨³å®šã€‚

---

## 4. æœªå®Œæˆé¡¹ï¼ˆä¸‹ä¸€æ­¥ï¼‰

### é«˜ä¼˜å…ˆçº§
- âœ… å¯¹å¤–å¯¼å…¥è·¯å¾„ç»Ÿä¸€ä¸ºæ–°åˆ†å±‚ï¼Œç§»é™¤ `constants/game` legacy å…¥å£ã€‚
- âœ… `src/config/gameConstants.json` å·²æŒ‰å­åŸŸæ‹†åˆ†ï¼ˆequipment/quality ç›¸å…³å·²è½åœ°ï¼‰ã€‚
- â¬œ è¿›ä¸€æ­¥æ”¶ç´§è·¨å±‚ä¾èµ–ï¼ˆé…ç½®æ•°æ®ä¸è¿è¡Œé€»è¾‘åˆ†ç¦»ï¼‰ã€‚

### ä¸­ä¼˜å…ˆçº§
- âœ… å·²ä¸º `config/content/monsters.json` å¢åŠ  schema/type çº¦æŸå¹¶æ¥å…¥ adapter æ ¡éªŒã€‚
- â¬œ ä¸ºå‰©ä½™ `config/content/*`ï¼ˆåç»­æ–°å¢å†…å®¹æ–‡ä»¶ï¼‰è¡¥é½ schema/typeã€‚
- âœ… å·²æ¸…ç†å†å²å…¼å®¹å­—æ®µä¸æ—§æ˜ å°„ï¼Œä¸‹çº¿ legacy è·¯å¾„ã€‚

### å·¥ç¨‹æ²»ç†
- â¬œ å¼•å…¥ ESLint + Prettier + EditorConfigã€‚
- â¬œ `package.json` è„šæœ¬è·¨å¹³å°æ”¹é€ ï¼ˆæ›¿æ¢ `rm -rf`ï¼‰ã€‚
- â¬œ README è¡¥å……â€œé…ç½®ä¿®æ”¹æµç¨‹ + å›æ»šæ–¹å¼â€ã€‚

---

## 5. ä¸‹ä¸€è¿­ä»£æ‰§è¡Œæ¸…å•ï¼ˆå¯ç›´æ¥å¼€å·¥ï¼‰

1. ä¸ºå‰©ä½™ content é…ç½®å»ºç«‹åŒæ ·çš„ schema/type ä¸ adapter æ ¡éªŒæ¨¡æ¿ã€‚
2. æ‰«æå¹¶æ”¶ç´§è·¨å±‚ä¾èµ–ï¼ˆé…ç½®æ•°æ®ä¸è¿è¡Œé€»è¾‘åˆ†ç¦»ï¼‰ã€‚
3. è¿è¡Œ `npm run lint`ï¼Œç¡®ä¿è¿ç§»åæ— ç±»å‹å›å½’ã€‚
4. æ›´æ–°æœ¬æ–‡ä»¶çŠ¶æ€ä¸å®Œæˆé¡¹ã€‚

---

## 6. é£é™©ä¸æ§åˆ¶

- é£é™©ï¼šè·¯å¾„è¿ç§»å¯¼è‡´å¼•ç”¨ä¸¢å¤±ã€‚
  - æ§åˆ¶ï¼šæ¯æ‰¹æ¬¡è¿ç§»åç«‹åˆ»æ‰§è¡Œ `tsc --noEmit`ã€‚
- é£é™©ï¼šå­—æ®µå‘½ååˆ‡æ¢å½±å“å­˜æ¡£å…¼å®¹ã€‚
  - æ§åˆ¶ï¼šæœ¬è½®å·²ä¸»åŠ¨ä¸‹çº¿æ—§å…¼å®¹è·¯å¾„ï¼Œåç»­åªç»´æŠ¤æ–°ç»“æ„å­—æ®µã€‚
- é£é™©ï¼šæ¨¡å—æ‹†åˆ†è¿‡å¿«å¯¼è‡´ PR è¿‡å¤§ã€‚
  - æ§åˆ¶ï¼šæŒ‰â€œæ–°å¢æ¨¡å— -> æ”¹å¼•ç”¨ -> åˆ é™¤æ—§æ–‡ä»¶â€ä¸‰æ­¥èµ°ã€‚
